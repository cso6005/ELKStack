
운영에서 es 색인을 만들 때 적절한 하드웨어를 고르는 것이 중요하다.

### RAM
- es 에서 최적해야 할 중요한 요소
- 머신 당 64GB의 RAM 이 좋다.
	- 32GB 를 es에 할당하고 나머지 32GB 를 운영 체제와 디스크 캐시에 할당
		- es 자체에 32GB 이상을 할당하는 것은 좋지 않다. 이상적으로 RAM 64GB 에서 반을 es에 할당하고 반은 운영체제가 무엇을 하든 두는 것이 좋다.
	- 그래서 Lucene 이 이것의 디스크 i/o 오퍼레이션을 가능한 최대치로 끌어올릴 수 있다.

### Other Hardware Considerations

1. Fast disks 
	1. 가능하면, SSD
	2. SSD 에 맞는 i/o 스케쥴러를 설정하는 것도 중요. (특히 데드라인이나 noop i/o 스케쥴러) 특정 운영 시스템에서 어떻게 설정할지도 봐야 한다. 이는 매우 큰 차이를 만들어 낼 수 있음.
	3. es 의 i/o 는 매우 무거워서 디스크가 빠를 수록 당연히 좋다.
2. 클러스터에 이미 여분이 있으니(레플리카 노드가 있는 이유), 디스크 자체에 여분이 필요하지는 않음. RAID0 를 사용하면 됨. 
3. CPU 부분에서는 ES 가 그렇게 무겁지 않기에 절약할 거면 이 부분에서.
4. 빠른 네트워크가 필요. 다른 노드에서 클러스터로 데이터를 복제하고 요청을 다른 샤드의 다른 노드로 보내면서 많은 네트워크 트래픽이 발생.
5. es 는 가능한 NAS(네트워크 결합 스토리지)는 사용하지 말라고 권함.
	1. NAS는 문제를 일으킬 수 있기에 로컬 SSD나, 고속 SAN(Storage Area Network) 기반 스토리지를 권함.
	2. es 는 고속 데이터 읽기 쓰기 작업을 필요로 하는 분산 검색 엔진으로, 스토리지 시스템의 성능이 직접적으로 영향을 미치는데, NAS 는 일반적으로 네트워크를 통해 데이터를 읽고 쓰기 때문에 로컬 디스크보다 I/O 속도가 느리다. 이로 인해, es의 성능에 문제를 발생시킨다.
	3. 또한, es 클러스터가 많은 데이터를 동시에 처리해야 할 때 네트워크 대역폭이 붖고하거나 지연이 크면 성능이 심각하게 영향을 받을 것이다.
	4. 
6. 환경을 제공하는 많은 하드웨어를 고를 때는 소, 중, 대 그리고 특대 구성만을 고려하면 된다. 클라우드 기반의 플랫폼을 사용한다면 확실히 이렇게 설정하면 됨. 
	1. 저런 선택지가 주어지면 주로 중, 대 를 고르는 게 좋음. 너무 크면 과하고 비용도 많이 듬. 
	2. 그리고 메모리가 너무 크면 속도가 느려짐. 
	3. 하나의 박스안에 색인이나 샤드를 충분히 넣지 못할 것이니, 작은 박스가 많을 필요도 없다. 
	4. 그래서 중, 대 중 하나를 선택하는 게 좋다.
		


