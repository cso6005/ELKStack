
# 1. Random access with size & from params
- "from" "size"
- 매번 검색할 때마다 각 샤드에서 정렬한 다음 코디네이터 노드의 메모리에 전부 올린다음 요청 대상 필터링해서 반환한다.
- 최대 윈도우 사이즈 기본값 10000개
  - 그 이후 from 10100 이렇게 사용하려면 max_result_window 을 올려야 함.
- 랜덤 액세스가 필요한 경우가 아니면 cpu & memory 사용이 매우 많아 비효율적이여서 권장하지 않음

### 파라미터
- from 
  - 어디부터
  - from 필드는 **0부터** 샌다.
  - 지정안하면, 0
- size 
  - 몇 개

> ex. r1 r2 r3 r4 r5 r6 r7 r8
> from 0, size 3 => r1,r2,r3 => 1page
> from 3, size 3 => r4,r5,r6 => 2page
> from 6, size 3 => r7,r8 => 3page


~~~
curl -XGET '127.0.0.1:9200/movies/_search?size=2&from2&pretty'

curl -XGET 127.0.0.1:9200/movies/_search?pretty -d'
{
    "from":2,
    "size":2,
    "query":{"match":{genre:"Sci-Fi"}}
}
'

~~~

### 주의 사항
- 일반적으로 es 에 국한된 것이 아니라, 일반적으로 검색 엔진의 자체적 문제로 깊은 페이징은 성능 저하를 불러일으키다. 
- 만약, 100090 - 1000100을 반환한다고 했을 때 10개의 결과만을 구하는 것이 아니라, 모든 것을 불러온 후 구한다.
- es 가 **from, size 로 요청한 페이지까지 모든 문서를 메모리에 로드한 다음 정렬하고 요청 내용을 반환**한다. **요청당 필요한 메모리는 from, size의 크기에 비례**하게 된다. 점점 뒤 페이지로 갈수록 쿼리가 느려져 큰 결과 집합을 페이징하느데 소요 시간이 더 걸리게 된다.
- 그렇기에 이런 식으로 페이징을 하면 성능 저하를 피할 수 가 없기에 사용자에게 반환할 결과 수에 상한선을 적용하거나 다른 방법을 택해야 한다.
